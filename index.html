<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ExoExams</title>

<style>
body{
  margin:0;
  font-family:Arial, sans-serif;
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  color:white;
  text-align:center;
}

.container{
  padding:80px 20px;
}

h1{
  font-size:40px;
  margin-bottom:10px;
}

input{
  padding:12px;
  width:60%;
  max-width:350px;
  border-radius:8px;
  border:none;
}

button{
  padding:12px 20px;
  border:none;
  border-radius:8px;
  background:#00f2fe;
  cursor:pointer;
  margin-left:5px;
  font-weight:bold;
}

.card{
  background:rgba(255,255,255,0.1);
  margin:20px auto;
  padding:20px;
  width:85%;
  max-width:500px;
  border-radius:12px;
}

a{
  color:#00f2fe;
  text-decoration:none;
}
</style>
</head>

<body>

<div class="container">
  <h1>ExoExams</h1>
  <p>All Government Exam Papers in One Place</p>

  <input type="text" id="search" placeholder="Search exam like UPSC, JEE...">
  <button onclick="searchExam()">Search</button>

  <div id="results"></div>
</div>

<script>

let examData = [];
let dataLoaded = false;

async function loadData(){
  try{
    const res = await fetch("https://script.google.com/macros/s/AKfycbwGv9nmWP7AWXVKOXwPYOKsI2wtOa6QXYIB8UDgBZdSOJDYLkUlWWr-2gQC2WU1ul_IgA/exec");
    examData = await res.json();
    dataLoaded = true;
    console.log("Data loaded successfully");
  }catch(err){
    console.log("Fetch error:", err);
  }
}

window.onload = loadData;

function searchExam(){

  const query = document.getElementById("search").value.trim().toLowerCase();
  const resultsDiv = document.getElementById("results");

  if(!dataLoaded){
    resultsDiv.innerHTML = "<p>Loading data... please wait 2 seconds.</p>";
    return;
  }

  if(!query){
    resultsDiv.innerHTML = "<p>Type something to search.</p>";
    return;
  }

  let output = "";

  for(let i=1; i<examData.length; i++){

    if(examData[i][0].toLowerCase().includes(query)){

      output += `
        <div class="card">
          <h3>${examData[i][0]} - ${examData[i][1]}</h3>
          <p>Category: ${examData[i][3]}</p>
          <a href="${examData[i][2]}" target="_blank">Download PDF</a>
        </div>
      `;
    }
  }

  if(output === ""){
    output = "<p>No exam found.</p>";
  }

  resultsDiv.innerHTML = output;
}

</script>

</body>
</html>
